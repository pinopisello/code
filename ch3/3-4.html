<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
        <title>React In Action</title>
    </head>
    <body>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/g/react@15.3.1(react.js+react-dom.js)"></script>
        <!-- Babel e' necessario per processare JSX -->
         <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js"></script> 
        <div id="container"></div>
      
        <script type="text/babel">  //serve a babel a capire che c'e' JSX dentro e server traspilation



const ShallowMerge = React.createClass({

    getInitialState: function() {
        return {
            user: {
                name: 'Mark',
                colors: {
                    favorite: ''
                }
            }
        };
    },

    stateupdated:()=> {console.log('state updated!')},

    onButtonClick: function() {
        this.setState({  //  name viene cancellato dallo state perche setState() fa shallow merge dello state: il new state NON contiene name   
            user: {
                colors: {
                    favorite: 'blue'
                }
            }
        },this.stateupdated);
    },


    render: function() {
        return (
            <div>
                <h1>My favorite color is {this.state.user.colors.favorite} and my name is {this.state.user.name}
                </h1>
                <button onClick={this.onButtonClick}>show the color!</button>
            </div>
        )
    }
})

ReactDOM.render(
    <ShallowMerge />,
    document.getElementById('container')
  );
</script>
</body>
</html>
